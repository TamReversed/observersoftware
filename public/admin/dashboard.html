<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="/favicon-eye.svg" type="image/svg+xml">
  <title>Dashboard | Observer Admin</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/styles/admin.css">
</head>
<body>
  <header class="admin-header">
    <a href="/" class="admin-brand">
      <img src="/assets/observer-logo-white.png" alt="Observer" class="admin-logo">
      <span class="admin-title">Observer Admin</span>
    </a>
    <nav class="admin-nav">
      <span class="admin-user" id="adminUser">Loading...</span>
      <a href="/" class="btn btn-ghost">View Site</a>
      <button class="btn btn-ghost" id="logoutBtn">Logout</button>
    </nav>
  </header>

  <main class="admin-layout">
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="content-type-tabs">
          <button class="content-type-tab active" data-type="posts">Posts</button>
          <button class="content-type-tab" data-type="work">Work</button>
          <button class="content-type-tab" data-type="capabilities">Products</button>
      </div>
        <div class="sidebar-actions">
          <span class="sidebar-title" id="sidebarTitle">Posts</span>
          <button class="btn btn-primary btn-sm" id="newItemBtn">+ New</button>
        </div>
      </div>
      <div class="items-list" id="itemsList">
        <div class="empty-state">Loading...</div>
      </div>
    </aside>

    <section class="editor-panel" id="editorPanel">
      <div class="welcome-state" id="welcomeState">
        <h2>Welcome to Observer Admin</h2>
        <p>Select an item to edit or create a new one</p>
      </div>

      <!-- Posts Editor -->
      <div id="postsEditor" class="editor-form" style="display: none;">
        <div class="editor-header">
          <h2 id="postsEditorTitle">New Post</h2>
          <div class="editor-actions">
            <button class="btn btn-danger" id="deletePostBtn" style="display: none;">Delete</button>
            <button class="btn btn-primary" id="savePostBtn">Save Post</button>
          </div>
        </div>
        <div class="editor-content">
          <div class="form-group">
            <label class="form-label" for="postTitle">Title</label>
            <input type="text" id="postTitle" class="form-input" placeholder="Enter post title">
            <p class="form-hint">Slug: <span id="slugPreview">-</span></p>
          </div>
          <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="postExcerpt">Excerpt</label>
              <textarea id="postExcerpt" class="form-input form-textarea small" placeholder="Brief description"></textarea>
          </div>
            <div class="form-group">
              <label class="form-label" for="postCategory">Category</label>
              <select id="postCategory" class="form-select"></select>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label" for="postContent">Content (Markdown)</label>
            <textarea id="postContent" class="form-input form-textarea content" placeholder="Write your post content..."></textarea>
          </div>
          <div class="form-group">
            <label class="form-toggle">
              <div class="toggle-switch">
                <input type="checkbox" id="postPublished">
                <span class="toggle-slider"></span>
              </div>
              <span class="toggle-label">Published</span>
            </label>
          </div>
        </div>
      </div>

      <!-- Work Editor -->
      <div id="workEditor" class="editor-form" style="display: none;">
        <div class="editor-header">
          <h2 id="workEditorTitle">New Work Item</h2>
          <div class="editor-actions">
            <button class="btn btn-danger" id="deleteWorkBtn" style="display: none;">Delete</button>
            <button class="btn btn-primary" id="saveWorkBtn">Save Work</button>
          </div>
        </div>
        <div class="editor-content">
          <div class="form-row">
            <div class="form-group">
              <label class="form-label" for="workIndustry">Industry</label>
              <input type="text" id="workIndustry" class="form-input" placeholder="e.g., Healthcare, Logistics">
            </div>
            <div class="form-group">
              <label class="form-label" for="workClient">Client Name (optional)</label>
              <input type="text" id="workClient" class="form-input" placeholder="Client or company name">
            </div>
          </div>
          <div class="form-group">
            <label class="form-label" for="workProblem">Problem</label>
            <textarea id="workProblem" class="form-input form-textarea small" placeholder="What problem did the client face?"></textarea>
          </div>
          <div class="form-group">
            <label class="form-label" for="workSolution">Solution</label>
            <textarea id="workSolution" class="form-input form-textarea" placeholder="How did Observer solve it?"></textarea>
          </div>
          <div class="form-group">
            <label class="form-label">Tags</label>
            <div class="tags-container" id="workTagsContainer">
              <input type="text" class="tag-input" id="workTagInput" placeholder="Type and press Enter">
            </div>
            <p class="form-hint">Press Enter to add tags</p>
          </div>
          <div class="form-row-3">
            <div class="form-group">
              <label class="form-label" for="workDate">Date</label>
              <input type="month" id="workDate" class="form-input">
            </div>
            <div class="form-group">
              <label class="form-label" for="workImage">Image URL (optional)</label>
              <input type="text" id="workImage" class="form-input" placeholder="/assets/work/project.jpg">
            </div>
            <div class="form-group">
              <label class="form-label" for="workCaseStudy">Case Study URL (optional)</label>
              <input type="text" id="workCaseStudy" class="form-input" placeholder="/case-studies/project">
            </div>
          </div>
          <div class="form-group">
            <label class="form-toggle">
              <div class="toggle-switch">
                <input type="checkbox" id="workPublished">
                <span class="toggle-slider"></span>
              </div>
              <span class="toggle-label">Published</span>
            </label>
          </div>
        </div>
      </div>

      <!-- Capabilities Editor -->
      <div id="capabilitiesEditor" class="editor-form" style="display: none;">
        <div class="editor-header">
          <h2 id="capabilitiesEditorTitle">New Capability</h2>
          <div class="editor-actions">
            <button class="btn btn-danger" id="deleteCapabilityBtn" style="display: none;">Delete</button>
            <button class="btn btn-primary" id="saveCapabilityBtn">Save Capability</button>
          </div>
        </div>
        <div class="editor-content">
          <div class="form-group">
            <label class="form-label" for="capabilityTitle">Title</label>
            <input type="text" id="capabilityTitle" class="form-input" placeholder="e.g., DataDragon, TableFlow">
          </div>
          <div class="form-group">
            <label class="form-label" for="capabilityDescription">Short Description</label>
            <textarea id="capabilityDescription" class="form-input form-textarea small" placeholder="Brief description shown on the card..."></textarea>
          </div>
          
          <!-- Icon Selection -->
          <div class="form-group">
            <label class="form-label">Icon</label>
            <div class="icon-selector">
              <div class="icon-type-tabs">
                <button type="button" class="icon-type-tab active" data-icon-type="preset">Preset</button>
                <button type="button" class="icon-type-tab" data-icon-type="svg">Custom SVG</button>
                <button type="button" class="icon-type-tab" data-icon-type="lottie">Lottie</button>
              </div>
              
              <div class="icon-type-content" id="iconPresetContent">
                <div class="icon-preset-grid" id="iconPresetGrid"></div>
                <input type="hidden" id="capabilityIconPreset" value="">
              </div>
              
              <div class="icon-type-content" id="iconSvgContent" style="display: none;">
                <textarea id="capabilityIconSvg" class="form-input form-textarea small" placeholder="Paste SVG code here..."></textarea>
                <p class="form-hint">Paste a valid SVG element. It will be sanitized for security.</p>
              </div>
              
              <div class="icon-type-content" id="iconLottieContent" style="display: none;">
                <input type="text" id="capabilityIconLottieUrl" class="form-input" placeholder="https://assets.lottiefiles.com/...">
                <p class="form-hint">Paste a URL to a Lottie JSON file</p>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label" for="capabilityLongDescription">Long Description (Markdown)</label>
            <textarea id="capabilityLongDescription" class="form-input form-textarea content" placeholder="Detailed description shown in the modal. Supports Markdown..."></textarea>
          </div>

          <div class="form-group">
            <label class="form-label">Features</label>
            <div class="tags-container" id="capabilityFeaturesContainer">
              <input type="text" class="tag-input" id="capabilityFeatureInput" placeholder="Type feature and press Enter">
            </div>
            <p class="form-hint">Press Enter to add features</p>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label class="form-label" for="capabilityExternalUrl">External URL</label>
              <input type="text" id="capabilityExternalUrl" class="form-input" placeholder="https://product.example.com">
            </div>
            <div class="form-group">
              <label class="form-label" for="capabilityOrder">Display Order</label>
              <input type="number" id="capabilityOrder" class="form-input" placeholder="1" min="1">
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Screenshots</label>
            <div class="screenshots-list" id="capabilityScreenshotsList"></div>
            <div class="screenshot-upload-zone" id="screenshotUploadZone">
              <div class="screenshot-upload-content">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-bottom: 0.5rem; opacity: 0.5;">
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                  <polyline points="17 8 12 3 7 8"></polyline>
                  <line x1="12" x2="12" y1="3" y2="15"></line>
                </svg>
                <p class="screenshot-upload-text">Drag & drop images here, or <span class="screenshot-upload-link">click to browse</span></p>
                <p class="screenshot-upload-hint">You can also paste images from clipboard (Ctrl/Cmd+V)</p>
              </div>
              <input type="file" id="screenshotFileInput" accept="image/*" multiple style="display: none;">
            </div>
            <div class="form-row" style="margin-top: 0.75rem;">
              <input type="text" id="capabilityScreenshotInput" class="form-input" placeholder="Or paste image URL here">
              <button type="button" class="btn btn-ghost" id="addScreenshotBtn">Add URL</button>
            </div>
            <p class="form-hint">Drag, paste, or enter URLs for product screenshots</p>
          </div>

          <div class="form-group">
            <label class="form-toggle">
              <div class="toggle-switch">
                <input type="checkbox" id="capabilityPublished">
                <span class="toggle-slider"></span>
              </div>
              <span class="toggle-label">Published</span>
            </label>
          </div>
        </div>
      </div>
    </section>
  </main>

  <div class="toast" id="toast"></div>

  <script src="/scripts/admin-dashboard.js"></script>
</body>
</html>
